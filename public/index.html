<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="utils.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
    
    <title>Sistemas Autonomos</title>
  </head>
  <body>
    <div style="text-align: center;">
      <h1><b>Incidentes Tráfico no Porto</b></h1>
      <hr style="border-top: solid; border-color: black;">
    </div>
    <div class="container">
      <div class="panel panel-danger">
        <div class="panel-heading"><h4><b>Número de incidentes:</b></h4></div>
        <div class="panel-body">Neste momento na zona em estudo existem <span id="numberIncidents"></span> incidentes!</div>
      </div>
      
    <div class="container">
      <button type="button" class="btn btn-primary" id="myButton"><h4>Collect Data!</h4></button>
      <script src="sketch.js"></script>
    </div>
    <p></p>
      
    <div class="panel panel-danger">
      <div class="panel-heading"><h4><b>Total de Leituras da API:</b></h4></div>
      <div class="panel-body"><b><span id="numberOfReads"></span></b> Leituras</div>
    </div>

    <div class="panel panel-danger">
      <div class="panel-heading"><h4><b>Total de Incidentes lidos:</b></h4></div>
      <div class="panel-body"><b><span id="numberTotalIncidents"></span></b> incidentes!</div>
    </div>

    <div class="panel panel-danger">
      <div class="panel-heading"><h4><b>Total de Incidentes UNICOS lidos:</b></h4></div>
      <div class="panel-body"><b><span id="numberUniqueTotalIncidents"></span></b> incidentes!</div>
    </div>

    <div class="panel panel-danger">
      <div class="panel-heading"><h4><b>Data com mais incidentes detetados:</b></h4></div>
      <div class="panel-body"><b><span id="DateMostIncidents"></span></b> com <b><span id="MostSingleIncidents"></span></b> incidentes!</div>
    </div>
      
    <div class="panel panel-danger">
      <div class="panel-heading"><h4><b>Acidente com Maior Comprimento:</b></h4></div>
      <div class="panel-body">
        <p>Inicio:          <span id="LengthMaxStart"></span></p>
        <p>Fim:             <span id="LengthMaxFinal"></span></p>
        <p>Atraso:          <span id="LengthMaxDelay"></span> segundos</p>
        <p>Hora de inicio:  <span id="LengthMaxSTime"></span></p>
        <p>Hora final:      <span id="LengthMaxFTime"></span></p>
        <p>Comprimento:     <b><span id="LengthMax"></span></b> Metros
      </div></p>
    </div>

      <div class="panel panel-danger">
        <div class="panel-heading"><h4><b>Acidente com Maior Atraso:</b></h4></div>
        <div class="panel-body">
        <p>Inicio:          <span id="DelayMaximoStart"></span></p>
        <p>Fim:             <span id="DelayMaximoFinal"></span></p>
        <p>Atraso:          <b><span id="DelayMaximo"></span></b> segundos</p>
        <p>Hora de inicio:  <span id="DelayMaximoSTime"></span></p>
        <p>Hora final:      <span id="DelayMaximoFTime"></span></p>
        <p>Comprimento:     <span id="DelayMaximoLength"></span> Metros</div></p>
      </div>

      
      <div class="panel panel-danger">
        <div class="panel-heading"><h4><b>Tempo Medio de Atraso:</b></h4></div>
        <div class="panel-body"><span id="DelayMedio"></span> segundos</div>
      </div>
    </div>

    <div class="container">
      <div style="border-style: solid; border-radius: 5px; border-width: 2px; border-color: black;" id="localmap"></div>
    </div>

    <hr style="border-top: solid; border-color: black;">

    <div style="text-align: center;">
      <h3><b>Gráficos</b></h3>
    </div>

    <div>
      <div class="row" style="margin-bottom: 20px;">
        <div class="col-sm-2"></div>
        <div class="col-sm-8"><canvas id="canvas_incidents" style="background-color: #e6e6e6;"></canvas></div>
        <div class="col-sm-2"></div>
      </div>
    </div>
    <div>
      <div class="row">
        <div class="col-sm-6"><canvas id="pie_chart" width="80" height="40"> </canvas></div>
        <div class="col-sm-6"><canvas id="pie_chart_Mag" width="80" height="40"> </canvas></div>
      </div>
    </div>

    <hr style="border-top: solid; border-color: black;">

    <div style="text-align: center;">
      <h3><b>Tabela</b></h3>
    </div>

    <div class="container">
      <div id="table" style="border-style: solid; border-width: 2px; width: 100%;">
        <div style="text-align: center;">
          <h4><b style="margin-top: 5px;">Tabela de leituras:</b></h4>
        </div>
        <button style="margin-bottom: 5px; margin-left: 42%;" type="button" class="btn btn-warning" id="tableButton"><h5 style="font-size: medium;">Click Me to hide table</h5></button>
        <table id="myTable" style="width: 100%; border-top: solid; border-color: gray;"></table>
      </div>
    </div>
    
    <script src="logs.js"></script>

  </body>
</html>